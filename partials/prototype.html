<div class="navigation"><div class="museum_navigation_menu"><div class="museum_navbar row"><div class="left_content"><i class="icon-plus-sign"></i><a class="top_nav" href="#">{{ 'header.newMuseum' | i18next }}</a><i class="icon-plus-sign"></i><a class="top_nav" href="#">{{ 'header.newTour' | i18next }}</a></div><div class="navbar-right"><museum-search ng-model="museum_search"></museum-search><div class="dropdown"><a class="dropdown-toggle" data-toggle="dropdown" href="#">{{user.mail}}<span class="caret"></span></a><ul class="dropdown-menu"><li ng-repeat="provider in user.providers" role="presentation"><a href="{{provider.link}}" role="menuitem" tabindex="-1">{{provider.name}}</a></li><li class="divider"></li><li ng-repeat="provider in user.providers" role="presentation"><a href="{{provider.link}}" role="menuitem" tabindex="-1"> {{ 'Edit' | i18next }} {{provider.name}}</a></li><li class="divider"></li><li role="presentation"><a href="" role="menuitem" tabindex="-1">{{ 'Profile' | i18next }}</a></li><li role="presentation"><a href="" role="menuitem" tabindex="-1">{{ 'Logout' | i18next }}</a></li></ul></div></div></div><div class="museum_filters"><a class="time_changed" href="#" ng-class="{&#39;active&#39;: museum_type_filter == &#39;&#39;}" ng-click="museum_type_filter = &#39;&#39;"><i class="icon-time"></i></a><a class="type_museum" href="#" ng-class="{&#39;active&#39;: museum_type_filter == &#39;museum&#39;}" ng-click="museum_type_filter = &#39;museum&#39;"><i class="icon-home"></i></a><a class="type_tour" href="#" ng-class="{&#39;active&#39;: museum_type_filter == &#39;tour&#39;}" ng-click="museum_type_filter = &#39;tour&#39;"><i class="icon-map-marker"></i></a></div><ul class="museum_list row"><li class="museum" ng-repeat="museum in museums | filter:museum_search | filter:{type:museum_type_filter}"><a href="/{{museum._id}}" ng-class="{&#39;active&#39;: museum.active}"><span class="package_status {{museum.stories.ru.package_status}}"><i ng-class="{&#39;icon-ok-sign&#39;:museum.package_status==&#39;generated&#39;, &#39;icon-refresh&#39;:museum.package_status==&#39;process&#39;}"></i></span><img src="{{museum.cover.thumbnailUrl || &#39;/img/img-bg.png&#39;}}" /><h4>{{museum.stories.ru.name}}, <span>{{museum.stories.ru.city}}</span></h4></a></li></ul></div><div class="navbar navbar-default" ng-mouseover="show_museum_edit_dropdown=true"><div class="left_content"><a class="menu_opener" href="#" toggle-menu=""><i class="icon-reorder"></i></a><h1 class="museum_title" ng-class="{&#39;opened&#39;:museum_edit_dropdown_opened}" ng-click="show_museum_edit($event)">{{current_museum.stories[current_museum.language].name || current_museum.stories[current_museum.def_lang].name |truncate:40}}</h1><div class="btn-group lang top_space"><a class="dropdown-toggle" data-toggle="dropdown" href="javascript:void(0)">{{ current_museum.language | i18next }}  <i class="icon-chevron-down"></i></a><ul class="dropdown-menu" role="menu"><li ng-repeat="story in current_museum.stories"><a href="#" ng-click="current_museum.language = story.language">{{ story.language | i18next }}</a></li><li class="divider"></li><li><a href="#" ng-click="new_museum_language()">{{ 'newLanguage' | i18next }}</a></li></ul></div><div class="button btn btn-default top_space edit" ng-click="show_museum_edit($event)"><i class="icon-pencil"></i>  {{ 'Edit' | i18next}}</div></div><div class="right_content"><div class="hider" ng-hide="museum_edit_dropdown_opened"><switchpubitem field="status" ng-item="current_museum.stories[current_museum.language]" ng-museum="current_museum" ng-provider="provider" root="current_museum" translations="translations" type="story"></switchpubitem></div></div></div><div class="museum_edit"><div id="museum_edit_dropdown" ng-class="{&#39;invalid&#39;: current_museum.invalid}" ng-controller="MuseumEditController"><div can-drag-and-drop="" class="dropdown_area" id="museum_dropzone" model="current_museum" selector="museum_fileupload" selector-dropzone="museum_dropzone" upload-to="{{backend_url}}/upload/{{current_museum._id}}"><div class="wrapper"><div class="text">{{ 'Drop media files here to attach to this object' | i18next }}</div><div class="progress"><div class="progress-bar progress-bar-success"></div></div></div></div><input class="fileupload" id="museum_fileupload" multiple="" name="files[]" type="file" /><lightbox-cropper model="current_museum"></lightbox-cropper><div class="description"><div class="controls"><a class="delete_story" href="#" ng-click="delete_museum_modal_open()"><i class="icon-trash"></i></a><div class="hider" ng-hide="current_museum.stories[current_museum.language].status == &#39;draft&#39;"><switchpubitem field="status" ng-item="current_museum.stories[current_museum.language]" ng-museum="current_museum" ng-provider="provider" root="current_museum" translations="translations" type="story"></switchpubitem></div><div class="close" ng-click="museum_edit_dropdown_close()"></div></div><ul class="nav nav-tabs"><li ng-class="{&#39;active&#39;: museum_tab == &#39;main&#39;}"><a href="#" ng-click="museum_tab = &#39;main&#39;">{{ 'Main' | i18next }}<span class="media_types story" ng-class="{&#39;invalid&#39;: current_museum.invalid}"><i class="icon-music empty" ng-hide="current_museum.stories[current_museum.language].audio"></i><i class="icon-align-left empty" ng-hide="current_museum.stories[current_museum.language].long_description"></i></span></a></li><li ng-class="{&#39;active&#39;: museum_tab == &#39;images&#39; }"><a class="current_museum" href="#" ng-click="museum_tab = &#39;images&#39;; check_mapped($event)">{{ 'Images' | i18next }}<span class="media_types story" ng-class="{&#39;invalid&#39;: current_museum.invalid}"><i class="icon-picture empty" ng-show="current_museum.images.length == 0"></i></span></a></li><li ng-class="{&#39;active&#39;: museum_tab == &#39;more&#39; }"><a href="#" ng-click="museum_tab = &#39;more&#39;">{{ 'More' | i18next }}</a></li></ul><div class="tab-content"><div class="tab-pane" ng-class="{&#39;active&#39;: museum_tab == &#39;main&#39; }"><form class="form-horizontal" name="mainForm" role="form"><placeholderfield ng-field="name" ng-help="help text for popup 2" ng-id="name" ng-item="current_museum.stories[current_museum.language]" ng-title="{{ &#39;Name&#39; | i18next }}" placeholder="current_museum.stories[current_museum.def_lang].name" type="story"></placeholderfield><audioplayer ng-field="audio" ng-help="help text for popup 5" ng-id="audio" ng-item="current_museum.stories[current_museum.language]" ng-title="{{ &#39;Audio&#39; | i18next }}" parent="current_museum.stories[current_museum.language]" type="media"></audioplayer><placeholdertextarea maxlength="2000" ng-field="long_description" ng-help="help text for popup 3" ng-id="description" ng-item="current_museum.stories[current_museum.language]" ng-title="{{ &#39;Description&#39; | i18next }}" placeholder="current_museum.stories[current_museum.def_lang].long_description" type="story"></placeholdertextarea></form></div><div class="tab-pane row" ng-class="{&#39;active&#39;: museum_tab == &#39;images&#39; }"><ul class="images col-xs-12 {{$parent.current_museum.has_hovered}}" lang="current_museum.language" sortable="current_museum.images"><li class="dragable_image" data-array-index="{{$index}}" data-lang="{{lang}}" ng-class="{&#39;hovered&#39;: image.image.hovered, &#39;timestamp&#39;: image.mappings[lang].timestamp &gt;= 0 }" ng-repeat="image in $parent.current_museum.images"><a class="img_thumbnail" data-start="{{$index}}" href="#" ng-mouseenter="$parent.$parent.set_hover(image, true)" ng-mouseout="$parent.$parent.set_hover(image, false)" open-lightbox="{{$index}}"><div class="label_timestamp" ng-show="image.mappings[lang].timestamp &gt;= 0"><span class="letter_label">{{ image.image.order | numstring }} </span><span class="time">{{ image.mappings[lang].timestamp | timerepr }}</span><span class="delete_maping close" ng-click="$parent.$parent.delete_mapping($index, &#39;current_museum&#39;, $event)">×</span></div><span class="cover" ng-class="{&#39;active&#39;:image.image.cover}" ng-click="$parent.make_cover($index)" ng-switch="" on="image.image.cover"><span ng-switch-when="true"><i class="icon-ok"></i> {{ "Cover" | i18next }}</span></span><img alt="" class="do_not_drop" draggable="false" src="{{image.image.thumbnailUrl || &#39;/img/img-bg.png&#39;}}" /></a><a class="remove" data-confirm="{{ &#39;Are you sure you wish to delete this image?&#39; | i18next }}" data-link="{{$parent.$parent.$parent.backend_url}}/media/{{media._id}}" data-method="delete" data-show-overlay="true" delete-media="" href="#" media="image.image" parent="$parent.$parent.current_museum" rel="nofollow" stop-event="">×</a><div class="delete_overlay"><div class="preloader"></div><span>{{ "Delete image?" | i18next }}</span><div class="overlay_controls"><a class="btn btn-default btn-sm delete" href="#">{{ "Delete" | i18next }}</a><a class="btn btn-default btn-sm cancel" href="#">{{ "Cancel" | i18next }}</a></div></div></li><li class="museum_image_placeholder"><a class="img_thumbnail" href="#"><img alt="" class="do_not_drop" src="/img/big_loader_2.GIF" /></a></li><li class="upload_item hint_text"><div class="drag_here"><div class="img"></div><span>{{ 'Drag images here' | i18next }}</span></div><div class="or_upload"><span>{{ 'or' | i18next }}<div class="upload_variants"><a button-file-upload="" class="btn btn-default upload" href="#">{{ 'Click to upload' | i18next }}</a><input class="form-control" placeholder="Paste image url" type="text" url-upload="current_museum" /><span>{{ 'invalid URL' | i18next }}</span></div></span></div></li></ul><div class="timline_container_holder" ng-class="{&#39;opened&#39;: museum_timline_opened || current_museum.stories[current_museum.language].mapped_images.length &gt; 0}"><div class="placeholder" ng-show="!current_museum.stories[current_museum.language].audio"></div><div class="timeline_controls"><button class="btn btn-default edit_images_btn" ng-hide="current_museum.images.length == 0" open-lightbox="0">{{ 'Edit images' | i18next }}</button><button class="btn btn-default timeline_toggler" ng-class="{&#39;active&#39;:museum_timline_opened  || current_museum.stories[current_museum.language].mapped_images.length &gt; 0}" ng-click="museum_timline_opened = !museum_timline_opened" ng-hide="!current_museum.stories[current_museum.language].audio">{{ 'Sync images and audio' | i18next }}</button><div class="drag_images" id="{{current_museum._id}}" ng-show="museum_timline_opened || current_museum.stories[current_museum.language].mapped_images.length &gt; 0"><span class="hint_text">{{ 'Drag images to audio timeline to sync it' | i18next }}&nbsp;&nbsp;&nbsp;<i class="icon-long-arrow-down">&nbsp;</i><i class="icon-long-arrow-down">&nbsp;</i><i class="icon-long-arrow-down">&nbsp;</i></span></div></div><div class="timline_container current_museum" droppable="" id="{{current_museum._id}}"><player container="current_museum" ng-field="audio" ng-help="help text for popup 5" ng-id="audio" ng-item="current_museum.stories[current_museum.language]" ng-title="{{ &#39;Audio&#39; | i18next }}" parent="current_museum.stories[current_museum.language]" type="media"></player></div></div></div><div class="tab-pane" ng-class="{&#39;active&#39;: museum_tab == &#39;more&#39; }"><ul class="nav nav-stacked nav-list col-xs-2"><li ng-class="{&#39;active&#39;: museum_subtab == &#39;video&#39; }"><a href="#" ng-click="museum_subtab = &#39;video&#39;">{{ 'Video' | i18next }}</a></li><li ng-class="{&#39;active&#39;: museum_subtab == &#39;qr-code&#39; }"><a href="#" ng-click="museum_subtab = &#39;qr-code&#39;">{{ 'QR-code' | i18next }}</a></li><li ng-class="{&#39;active&#39;: museum_subtab == &#39;quiz&#39; }"><a href="#" ng-click="museum_subtab = &#39;quiz&#39;">{{ 'Quiz' | i18next }}</a></li><li ng-class="{&#39;active&#39;: museum_subtab == &#39;collections&#39; }"><a href="#" ng-click="museum_subtab = &#39;collections&#39;">{{ 'Used in collections' | i18next }}</a></li><li ng-class="{&#39;active&#39;: museum_subtab == &#39;tours&#39; }"><a href="#" ng-click="museum_subtab = &#39;tours&#39;">{{ 'Linked in tours' | i18next }}</a></li><li ng-class="{&#39;active&#39;: museum_subtab == &#39;settings&#39; }"><a href="#" ng-click="museum_subtab = &#39;settings&#39;">{{ 'Advanced settings' | i18next }}</a></li></ul><div class="tab-content col-xs-10"><div class="tab-pane" ng-class="{&#39;active&#39;: museum_subtab == &#39;video&#39; }">sample video content</div><div class="tab-pane" ng-class="{&#39;active&#39;: museum_subtab == &#39;qr-code&#39; }"><row><div class="qr_image col-xs-5"><img alt="Qr_code" src="{{current_museum.stories[current_museum.language].qr_code || &#39;/img/qr_code.png&#39;}}" /></div><div class="well col-xs-5"><a class="btn qr-code" href="{{current_museum.stories[current_museum.language].qr_code}}" target="_blank">{{ 'Print QR-code' | i18next }}</a><br><p>{{ "You can print the Exhibit's QR-code and place it near the Exhibit. When the MTG Client reads this code, it will open the Exhibit's page immediately. If there is no MTG Client installed on the user's phone, then it will take the user to a download page on either AppStore or Google Play." | i18next }}</p></br></div></row></div><div class="tab-pane" ng-class="{&#39;active&#39;: museum_subtab == &#39;quiz&#39; }"><div class="row"><form class="form-horizontal" name="museumQuizform" role="form"><div class="switch-toggle ios" quiz-switch="museum_story_quiz" switch-toggle=""><input id="museum_story_quiz_enabled" name="museum_story_quiz_enabled" ng-model="current_museum.stories[current_museum.language].quiz.state" type="radio" value="published" /><label for="museum_story_quiz_enabled" ng-click="quiz_state(museumQuizform, current_museum.stories[current_museum.language].quiz)">{{ 'Enable' | i18next }}</label><input id="museum_story_quiz_disabled" name="museum_story_quiz_disabled" ng-model="current_museum.stories[current_museum.language].quiz.state" type="radio" value="limited" /><label for="museum_story_quiz_disabled" ng-click="quiz_state(museumQuizform, current_museum.stories[current_museum.language].quiz)">{{ 'Disable' | i18next }}</label><a></a></div><placeholderfield ng-field="question" ng-help="help text for popup" ng-id="museum_story_quiz_attributes_question" ng-item="current_museum.stories[current_museum.language].quiz" ng-title="{{ &#39;Question&#39; | i18next }}" type="quiz"></placeholderfield><div class="error"><div class="controls"></div></div><div class="answers"><quizanswer field="content" ng-collection="current_museum.stories[current_museum.language].quiz.answers" ng-id="story_quiz_attributes_answers_attributes_{{$index}}_content" ng-item="answer" ng-repeat="answer in current_museum.stories[current_museum.language].quiz.answers" type="quiz_answer"></quizanswer></div><placeholdertextarea ng-field="comment" ng-help="help text for popup 3" ng-id="quiz_description" ng-item="current_museum.stories[current_museum.language].quiz" ng-title="{{ &#39;Description&#39; | i18next }}" type="quiz"></placeholdertextarea></form></div></div><div class="tab-pane" ng-class="{&#39;active&#39;: museum_subtab == &#39;collections&#39; }">2222</div><div class="tab-pane" ng-class="{&#39;active&#39;: museum_subtab == &#39;tours&#39; }">33333</div><div class="tab-pane" ng-class="{&#39;active&#39;: museum_subtab == &#39;settings&#39; }">44444</div></div></div></div></div></div></div></div><div class="float_menu"><div class="actions_bar"><error-notification></error-notification><div class="left_content" ng-mouseover="show_museum_edit_dropdown=false"><div class="left_buttons"><button class="btn btn-warning btn-sm spacer" id="create_new_item" ng-class="{&#39;disabled&#39;:new_item_creation}" ng-click="create_new_item()" type="button">{{ 'New item' | i18next }}</button><div class="btn-group"><button class="btn btn-default btn-sm dropdown-toggle spacer" data-toggle="dropdown" type="button">{{ 'Actions' | i18next }}  <span class="caret"></span></button><ul class="dropdown-menu" role="menu"><li ng-click="select_all_exhibits()" ng-switch="" on="all_selected"><a href="#" ng-switch-when="false">{{ 'Select all' | i18next }}</a><a href="#" ng-switch-when="true">{{ 'Cancel selection' | i18next }}</a></li><li class="dropdown-submenu"><a href="#">{{ 'addSelectedCollection' | i18next }}</a><ul class="dropdown-menu" role="menu"><li><a href="#">Collection 1</a></li><li><a href="#">Collection 2</a></li><li><a href="#">Collection 3</a></li></ul></li><li class="dropdown-submenu"><a href="#">{{ 'setItemVisibility' | i18next }}</a><ul class="dropdown-menu" role="menu"><li><a href="#" ng-click="mass_switch_pub(&#39;published&#39;)"><i class="icon-globe"></i>  {{ 'Publish' | i18next }}</a></li><li><a href="#" ng-click="mass_switch_pub(&#39;passcode&#39;)"><i class="icon-lock"></i>  {{ 'Make private' | i18next }}</a></li><li><a href="#" ng-click="mass_switch_pub(&#39;opas_invisible&#39;)"><i class="icon-eye-close"></i>  {{ 'Make invisible' | i18next }}</a></li></ul></li><li><a href="#" ng-click="delete_selected_exhibits()">{{ 'Delete selected items' | i18next }}</a></li></ul></div><button class="btn btn-default btn-sm spacer" ng-click="select_all_exhibits(&#39;select&#39;)" ng-show="select_all_enabled">{{ 'Select all' | i18next }}</button><button class="btn btn-default btn-sm spacer" ng-click="select_all_exhibits(&#39;cancel&#39;)" ng-show="select_all_enabled">{{ 'Cancel selection' | i18next }}</button></div><lang-list></lang-list></div><div class="right_content" ng-mouseover="show_museum_edit_dropdown=false"><input class="form-control input-sm search spacer" ng-model="exhibit_search" placeholder="{{ &#39;Search&#39; | i18next }}" resizer="" type="text" /><button class="btn btn-default btn-sm filter_opener spacer" ng-class="{&#39;active&#39;: filters_opened || exhibits_visibility_filter.length &gt; 3}" toggle-filters="" type="button">{{ 'Filters and sorts' | i18next }}</button><button class="btn btn-default btn-sm help_opener"><i class="icon-question-sign"></i></button></div></div><div class="filters_bar"><div class="btn-group spacer"><button class="btn btn-default btn-sm" ng-class="{&#39;active&#39;: sort_text == &#39;icon-sort-by-order&#39;}" ng-click="sort_text=&#39;icon-sort-by-order&#39;; reload_exhibits(&#39;number&#39;, 1)"><i class="icon-sort-by-order"></i></button><button class="btn btn-default btn-sm" ng-class="{&#39;active&#39;: sort_text == &#39;icon-sort-by-order-alt&#39;}" ng-click="sort_text=&#39;icon-sort-by-order-alt&#39;; reload_exhibits(&#39;number&#39;, -1)"><i class="icon-sort-by-order-alt"></i></button></div><div class="btn-group spacer"><button class="btn btn-default btn-sm" ng-class="{&#39;active&#39;: exhibits_visibility_filter == &#39;all&#39;}" ng-click="exhibits_visibility_filter = &#39;all&#39;">{{ 'All' | i18next }}</button><button class="btn btn-default btn-sm" ng-class="{&#39;active&#39;: exhibits_visibility_filter == &#39;&#39;}" ng-click="group_exhibits_processor()">Group</button><button class="btn btn-default btn-sm" ng-class="{&#39;active&#39;: exhibits_visibility_filter == &#39;published&#39;}" ng-click="exhibits_visibility_filter = &#39;published&#39;"><i class="icon-globe"></i></button><button class="btn btn-default btn-sm" ng-class="{&#39;active&#39;: exhibits_visibility_filter == &#39;passcode&#39;}" ng-click="exhibits_visibility_filter = &#39;passcode&#39;"><i class="icon-lock"></i></button><button class="btn btn-default btn-sm" ng-class="{&#39;active&#39;: exhibits_visibility_filter == &#39;opas_invisible&#39;}" ng-click="exhibits_visibility_filter = &#39;opas_invisible&#39;"><i class="icon-eye-close"></i></button><button class="btn btn-default btn-sm" ng-class="{&#39;active&#39;: exhibits_visibility_filter == &#39;draft&#39;}" ng-click="exhibits_visibility_filter = &#39;draft&#39;"><i class="icon-edit"></i></button></div></div></div><div class="page-wrapper" ng-mouseover="show_museum_edit_dropdown=false"><div class="page"><div class="filters_placeholder"></div><script id="myDummyModalContent.html" type="text/ng-template"><div class="modal-dialog" id="dummyModal"><div class="modal-content"><div class="modal-body"><h4 class="modal-title">{{ 'Name of exhibit is empty' | i18next }}</h4></div><div class="modal-footer"><button class="btn btn-default" ng-click="discard()" type="button">{{ 'Discard item' | i18next }}</button><button class="btn btn-default" ng-click="save_as()" type="button">{{ 'Save as' | i18next }} "item_{{exhibit.number}}"</button></div></div></div></script><script id="myMuseumModalContent.html" type="text/ng-template"><div class="modal-dialog" id="new_museum"><div class="modal-content"><div class="modal-header"><h3 class="modal-title">{{ 'New language' | i18next }}</h3></div><div class="modal-body description"><form class="form-horizontal"><new-lang-switch museum="museum"></new-lang-switch><placeholderfield ng-field="name" ng-help="help text for popup 2" ng-id="name" ng-item="museum.stories.dummy" ng-title="{{ &#39;Name&#39; | i18next }}" placeholder="museum.stories.dummy.name" type="story"></placeholderfield></form></div><div class="modal-footer"><button class="btn btn-warning" ng-class="{&#39;disabled&#39;: museum.stories.dummy.name.length == 0 &amp;&amp; museum.language != &#39;new_lang&#39; }" ng-click="save_as()" type="button">{{ 'Create' | i18next }}</button><button class="btn btn-default" ng-click="discard()" type="button">{{ 'Cancel' | i18next }}</button></div></div></div></script><script id="myModalContent.html" type="text/ng-template"><div class="modal-dialog" id="delete_story"><div class="modal-content"><div class="modal-body"><form class="form-horizontal"><div class="only_one" ng-show="only_one"><div class="form-group"><label class="control-label" for="lang_def_{{modal_options.current_language.language}}" ng-click="show_langs = false; mark_default_only()"><input checked="checked" class="hidden" id="lang_def_{{modal_options.current_language.language}}" name="language" type="radio" value="en" />Delete item completely?</label></div></div><div class="multiply" ng-hide="only_one"><div class="form-group"><label class="control-label" for="lang_{{modal_options.current_language.language}}" ng-click="show_langs = false; mark_default_only()"><input checked="checked" id="lang_{{modal_options.current_language.language}}" name="language" type="radio" value="en" />Delete only {{modal_options.current_language.name}} language</label></div><div class="form-group"><label class="control-label" for="lang_all" ng-click="show_langs = false; mark_all()"><input id="lang_all" name="language" type="radio" value="all" />Delete all languages</label></div><div class="form-group"><label class="control-label lang_selected" for="lang_selected" ng-click="show_langs = true"><input id="lang_selected" name="language" type="radio" value="selected" />Delete only selected languages</label></div></div><div class="other_variants" ng-show="show_langs"><div class="form-group" ng-repeat=" (language, value) in modal_options.languages"><label class="control-label" for="language_{{value.name}}"><input id="language_{{value.name}}" name="languages[]" ng-change="lang_proc()" ng-checked="value.checked" ng-model="value.checked" type="checkbox" value="{{language}}" />{{value.name}}</label></div></div><div class="password" ng-show="password_input_shown"><label class="control-label" for="modal_delete_password">Please, enter your password to confirm deletion</label><input id="modal_delete_password" name="modal_delete_password" ng-change="console.log(&#39;11111111111&#39;)" ng-model="$parent.deletion_password" type="password" /></div></form></div><div class="modal-footer"><button class="btn btn-default" ng-click="ok()" type="button">Delete</button><button class="btn btn-default" ng-click="cancel()" type="button">Cancel</button></div></div></div></script><script id="museumDelete.html" type="text/ng-template"><div class="modal-dialog" id="delete_museum_story"><div class="modal-content"><div class="modal-body"><form class="form-horizontal"><div class="multiply" ng-hide="only_one"><div class="form-group"><label class="control-label" for="only_default"><input id="only_default" name="variant" ng-checked="variant.checked" ng-model="variant.checked" type="radio" value="lang" />{{ 'Delete museum in' | i18next }} {{modal_options.current_language.language | i18next }} {{ 'language (including exhibits an collections)' | i18next }}</label></div><div class="form-group"><label class="control-label" for="museum_lang_all"><input id="museum_lang_all" name="variant" ng-checked="variant.checked" ng-model="variant.checked" type="radio" value="all" />{{ 'Delete whole museum (including exhibits an collections)' | i18next }}</label></div></div><div class="password"><label class="control-label" for="modal_delete_password">{{ 'Please, enter your password to confirm deletion' | i18next }}</label><input id="modal_delete_password" name="modal_delete_password" ng-model="$parent.deletion_password" type="password" /></div></form></div><div class="modal-footer"><button class="btn btn-default" ng-click="ok()" type="button">{{ 'Delete' | i18next }}</button><button class="btn btn-default" ng-click="cancel()" type="button">{{ 'Cancel' | i18next }}</button></div></div></div></script><ul class="exhibits common" collection="common" exhibits-sortable="" ng-hide="grouped_exhibits"><li drop-down-edit="" id="drop_down" ng-class="{&#39;invalid&#39;: active_exhibit.invalid}"><div can-drag-and-drop="" class="dropdown_area" id="dropzone" model="active_exhibit" selector="fileupload" selector-dropzone="dropzone" upload-to="{{backend_url}}/upload/{{active_exhibit._id}}"><div class="wrapper"><div class="text">{{ 'Drop media files here to attach to this object' | i18next }}</div><div class="progress" id="progress"><div class="progress-text">Загружено ... из ..., скорость: 256kb/s</div><div class="progress-bar progress-bar-success"></div></div></div></div><input class="fileupload" id="fileupload" multiple="" name="files[]" type="file" /><lightbox-cropper model="active_exhibit"></lightbox-cropper><div class="description"><div class="controls"><a class="delete_story" href="#" ng-click="delete_modal_open()"><i class="icon-trash"></i></a><div class="hider" ng-hide="active_exhibit.stories[current_museum.language].status == &#39;draft&#39; || active_exhibit.stories[current_museum.language].name.length == 0"><switchpubitem field="status" ng-item="active_exhibit.stories[current_museum.language]" ng-museum="current_museum" ng-provider="provider" root="active_exhibit" translations="translations" type="story"></switchpubitem></div><div class="close"></div></div><ul class="nav nav-tabs"><li ng-class="{&#39;active&#39;: story_tab == &#39;main&#39;}"><a href="#" ng-click="story_tab = &#39;main&#39;">{{ 'Main' | i18next }}<span class="media_types story" ng-class="{&#39;invalid&#39;: active_exhibit.invalid}"><i class="icon-music empty" ng-hide="active_exhibit.stories[current_museum.language].audio"></i><i class="icon-align-left empty" ng-hide="active_exhibit.stories[current_museum.language].long_description"></i></span></a></li><li class="images_tab" ng-class="{&#39;active&#39;: story_tab == &#39;images&#39; }"><a class="active_exhibit" href="#" ng-click="story_tab = &#39;images&#39;; check_mapped($event)">{{ 'Images' | i18next }}<span class="media_types story" ng-class="{&#39;invalid&#39;: active_exhibit.invalid}"><i class="icon-picture empty" ng-show="active_exhibit.images.length == 0"></i></span></a></li><li ng-class="{&#39;active&#39;: story_tab == &#39;more&#39; }"><a href="#" ng-click="story_tab = &#39;more&#39;">{{ 'More' | i18next }}</a></li></ul><div class="tab-content"><div class="tab-pane" ng-class="{&#39;active&#39;: story_tab == &#39;main&#39; }"><form class="form-horizontal" name="mainForm" role="form"><placeholderfield ng-field="name" ng-help="help text for popup 2" ng-id="name" ng-item="active_exhibit.stories[current_museum.language]" ng-title="{{ &#39;Name&#39; | i18next }}" placeholder="active_exhibit.stories[current_museum.def_lang].name" type="story"></placeholderfield><audioplayer ng-field="audio" ng-help="help text for popup 5" ng-id="audio" ng-item="active_exhibit.stories[current_museum.language]" ng-title="{{ &#39;Audio&#39; | i18next }}" parent="active_exhibit.stories[current_museum.language]" type="media"></audioplayer><placeholdertextarea maxlength="2000" ng-field="long_description" ng-help="help text for popup 3" ng-id="description" ng-item="active_exhibit.stories[current_museum.language]" ng-title="{{ &#39;Description&#39; | i18next }}" placeholder="active_exhibit.stories[current_museum.def_lang].long_description" type="story"></placeholdertextarea></form></div><div class="tab-pane row" ng-class="{&#39;active&#39;: story_tab == &#39;images&#39; }"><ul class="images col-xs-12 {{$parent.active_exhibit.has_hovered}}" lang="current_museum.language" sortable="active_exhibit.images"><li class="dragable_image" data-array-index="{{$index}}" data-lang="{{lang}}" ng-class="{&#39;hovered&#39;: image.image.hovered, &#39;timestamp&#39;: image.mappings[lang].timestamp &gt;= 0 }" ng-repeat="image in $parent.active_exhibit.images"><a class="img_thumbnail" data-start="{{$index}}" href="#" ng-mouseenter="$parent.$parent.set_hover(image, true)" ng-mouseout="$parent.$parent.set_hover(image, false)" open-lightbox="{{$index}}"><div class="label_timestamp" ng-show="image.mappings[lang].timestamp &gt;= 0"><span class="letter_label">{{ image.image.order | numstring }} </span><span class="time">{{ image.mappings[lang].timestamp | timerepr }}</span><span class="delete_maping close" ng-click="$parent.$parent.delete_mapping($index, &#39;active_exhibit&#39;, $event)">×</span></div><span class="cover" ng-class="{&#39;active&#39;:image.image.cover}" ng-click="$parent.make_cover($index)" ng-switch="" on="image.image.cover"><span ng-switch-when="true"><i class="icon-ok"></i> {{ "Cover" | i18next }}</span></span><img alt="" class="do_not_drop" draggable="false" src="{{image.image.thumbnailUrl || &#39;/img/img-bg.png&#39;}}" /></a><a class="remove" data-confirm="{{ &#39;Are you sure you wish to delete this image?&#39; | i18next }}" data-link="{{$parent.$parent.$parent.backend_url}}/media/{{media._id}}" data-method="delete" data-show-overlay="true" delete-media="" href="#" media="image.image" parent="$parent.$parent.active_exhibit" rel="nofollow" stop-event="">×</a><div class="delete_overlay"><div class="preloader"></div><span>{{ "Delete image?" | i18next }}</span><div class="overlay_controls"><a class="btn btn-default btn-sm delete" href="#">{{ "Delete" | i18next }}</a><a class="btn btn-default btn-sm cancel" href="#">{{ "Cancel" | i18next }}</a></div></div></li><li class="museum_image_placeholder"><a class="img_thumbnail" href="#"><img alt="" class="do_not_drop" src="/img/big_loader_2.GIF" /></a></li><li class="upload_item hint_text"><div class="drag_here"><div class="img"></div><span>{{ 'Drag images here' | i18next }}</span></div><div class="or_upload"><span>{{ 'or' | i18next }}</span><div class="upload_variants"><a button-file-upload="" class="btn btn-default upload" href="#">{{ 'Click to upload' | i18next }}</a><input class="form-control" placeholder="Paste image url" type="text" url-upload="active_exhibit" /><span>{{ 'invalid URL' | i18next }}</span></div></div></li></ul><div class="timline_container_holder" ng-class="{&#39;opened&#39;: exhibit_timline_opened || active_exhibit.stories[current_museum.language].mapped_images.length &gt; 0}"><div class="placeholder" ng-show="!active_exhibit.stories[current_museum.language].audio"></div><div class="timeline_controls"><button class="btn btn-default edit_images_btn" ng-hide="active_exhibit.images.length == 0" open-lightbox="0">{{ 'Edit images' | i18next }}</button><button class="btn btn-default timeline_toggler" ng-class="{&#39;active&#39;:exhibit_timline_opened  || active_exhibit.stories[current_museum.language].mapped_images.length &gt; 0}" ng-click="exhibit_timline_opened = !exhibit_timline_opened" ng-hide="!active_exhibit.stories[current_museum.language].audio">{{ 'Sync images and audio' | i18next }}</button><div class="drag_images" id="{{active_exhibit._id}}" ng-show="exhibit_timline_opened || active_exhibit.stories[current_museum.language].mapped_images.length &gt; 0"><span class="hint_text">{{ 'Drag images to audio timeline to sync it' | i18next }}&nbsp;&nbsp;&nbsp;<i class="icon-long-arrow-down">&nbsp;</i><i class="icon-long-arrow-down">&nbsp;</i><i class="icon-long-arrow-down">&nbsp;</i></span></div></div><div class="timline_container active_exhibit" droppable="" id="{{active_exhibit._id}}"><player container="active_exhibit" ng-field="audio" ng-help="help text for popup 5" ng-id="audio" ng-item="active_exhibit.stories[current_museum.language]" ng-title="{{ &#39;Audio&#39; | i18next }}" parent="active_exhibit.stories[current_museum.language]" type="media"></player></div></div></div><div class="tab-pane" ng-class="{&#39;active&#39;: story_tab == &#39;more&#39; }"><ul class="nav nav-stacked nav-list col-xs-2"><li ng-class="{&#39;active&#39;: story_subtab == &#39;video&#39; }"><a href="#" ng-click="story_subtab = &#39;video&#39;">{{ 'Video' | i18next }}</a></li><li ng-class="{&#39;active&#39;: story_subtab == &#39;qr-code&#39; }"><a href="#" ng-click="story_subtab = &#39;qr-code&#39;">{{ 'QR-code' | i18next }}</a></li><li ng-class="{&#39;active&#39;: story_subtab == &#39;quiz&#39; }"><a href="#" ng-click="story_subtab = &#39;quiz&#39;">{{ 'Quiz' | i18next }}</a></li><li ng-class="{&#39;active&#39;: story_subtab == &#39;collections&#39; }"><a href="#" ng-click="story_subtab = &#39;collections&#39;">{{ 'Used in collections' | i18next }}</a></li><li ng-class="{&#39;active&#39;: story_subtab == &#39;tours&#39; }"><a href="#" ng-click="story_subtab = &#39;tours&#39;">{{ 'Linked in tours' | i18next }}</a></li><li ng-class="{&#39;active&#39;: story_subtab == &#39;settings&#39; }"><a href="#" ng-click="story_subtab = &#39;settings&#39;">{{ 'Advanced settings' | i18next }}</a></li></ul><div class="tab-content col-xs-10"><div class="tab-pane" ng-class="{&#39;active&#39;: story_subtab == &#39;video&#39; }">sample video content</div><div class="tab-pane" ng-class="{&#39;active&#39;: story_subtab == &#39;qr-code&#39; }"><row><div class="qr_image col-xs-5"><img alt="Qr_code" src="{{active_exhibit.stories[current_museum.language].qr_code || &#39;/img/qr_code.png&#39;}}" /></div><div class="well col-xs-5"><a class="btn qr-code" href="{{active_exhibit.stories[current_museum.language].qr_code}}" target="_blank">{{ 'Print QR-code' | i18next }}</a><br><p>{{ "You can print the Exhibit's QR-code and place it near the Exhibit. When the MTG Client reads this code, it will open the Exhibit's page immediately. If there is no MTG Client installed on the user's phone, then it will take the user to a download page on either AppStore or Google Play." | i18next }}</p></br></div></row></div><div class="tab-pane" ng-class="{&#39;active&#39;: story_subtab == &#39;quiz&#39; }"><div class="row"><form class="form-horizontal" name="quizform" role="form"><div class="switch-toggle ios" quiz-switch="story_quiz" switch-toggle=""><input id="story_quiz_enabled" name="story_quiz_enabled" ng-model="active_exhibit.stories[current_museum.language].quiz.status" type="radio" value="published" /><label for="story_quiz_enabled" ng-click="quiz_state(quizform, active_exhibit.stories[current_museum.language].quiz)">{{ 'Enable' | i18next }}</label><input id="story_quiz_disabled" name="story_quiz_enabled" ng-model="active_exhibit.stories[current_museum.language].quiz.status" type="radio" value="limited" /><label for="story_quiz_disabled" ng-click="quiz_state(quizform, active_exhibit.stories[current_museum.language].quiz)">{{ 'Disable' | i18next }}</label><a></a></div><placeholderfield ng-field="question" ng-help="help text for popup" ng-id="story_quiz_attributes_question" ng-item="active_exhibit.stories[current_museum.language].quiz" ng-title="{{ &#39;Question&#39; | i18next }}" type="quiz"></placeholderfield><div class="error"><div class="controls"></div></div><div class="answers"><quizanswer field="content" ng-collection="active_exhibit.stories[current_museum.language].quiz.answers" ng-id="story_quiz_attributes_answers_attributes_{{$index}}_content" ng-item="answer" ng-repeat="answer in active_exhibit.stories[current_museum.language].quiz.answers" type="quiz_answer"></quizanswer></div><placeholdertextarea ng-field="comment" ng-help="help text for popup 3" ng-id="quiz_description" ng-item="active_exhibit.stories[current_museum.language].quiz" ng-title="{{ &#39;Description&#39; | i18next }}" type="quiz"></placeholdertextarea></form></div></div><div class="tab-pane" ng-class="{&#39;active&#39;: story_subtab == &#39;collections&#39; }">2222</div><div class="tab-pane" ng-class="{&#39;active&#39;: story_subtab == &#39;tours&#39; }">33333</div><div class="tab-pane" ng-class="{&#39;active&#39;: story_subtab == &#39;settings&#39; }"><form class="form-horizontal" role="form"><placeholderfield ng-field="number" ng-help="help text for popup" ng-id="opas_number" ng-item="active_exhibit" ng-title="{{ &#39;OPAS №&#39; | i18next }}" placeholder="active_exhibit.number" type="story_set"></placeholderfield></form></div></div></div></div></div></li><li class="exhibit" data-exhibit-id="{{exhibit._id}}" ng-class="{active: exhibit.active, &#39;selected&#39;:exhibit.selected}" ng-hide="ajax_progress" ng-repeat="exhibit in exhibits | filter:criteriaMatch(exhibit_search) | filter:statusMatch()" post-render=""><div class="opener {{exhibit.stories[current_museum.language].status}} museum_{{current_museum.stories[current_museum.language].status}}" ng-class="{&#39;border&#39;: exhibit.selected, &#39;draft&#39;:exhibit.stories[current_museum.language].name.length == 0}"><div class="checkbox"><input ng-change="check_selected()" ng-model="exhibit.selected" type="checkbox" /></div><div class="image"><img ng-click="open_dropdown($event, exhibit)" src="{{exhibit.cover.thumbnailUrl || &#39;/img/img-bg.png&#39;}}" /></div><div class="description" ng-click="open_dropdown($event, exhibit)"><h4 ng-class="{&#39;dummy_header&#39;:exhibit.stories[current_museum.language].name.length == 0}">{{exhibit.number}} {{exhibit.stories[current_museum.language].name || exhibit.stories[current_museum.def_lang].name}}</h4><div class="media_types" ng-class="{&#39;invalid&#39;: exhibit.invalid}"><i class="icon-picture empty" ng-show="exhibit.images.length == 0"></i><i class="icon-list-ol empty" ng-show="exhibit.number.length == 0"></i><i class="icon-music" ng-show="exhibit.stories[current_museum.language].audio"></i><i class="icon-music empty" ng-hide="exhibit.stories[current_museum.language].audio"></i><i class="icon-align-left" ng-show="exhibit.stories[current_museum.language].long_description"></i><i class="icon-align-left empty" ng-hide="exhibit.stories[current_museum.language].long_description"></i><i class="icon-youtube-play" ng-show="exhibit.stories[current_museum.language].video"></i><i class="icon-puzzle-piece" ng-show="exhibit.stories[current_museum.language].quiz.status == &#39;published&#39;"></i></div></div><div class="visibility" ng-class="{&#39;invalid&#39;: exhibit.invalid}" ng-switch="" on="exhibit.stories[current_museum.language].status"><i class="icon-globe placeholder" ng-switch-when="published"></i><i class="icon-lock placeholder" ng-switch-when="passcode"></i><i class="icon-eye-close placeholder" ng-switch-when="opas_invisible"></i><div class="on_hover"><switchpub field="status" ng-item="exhibit.stories[current_museum.language]" ng-provider="provider" root="exhibit" type="story"></switchpub></div></div></div></li><li class="exhibit dummy" ng-show="new_item_creation"><div class="opener draft"><div class="overlay" ng-click="open_dropdown($event, new_exhibit)"></div><div class="image"><img src="/img/img-bg.png" /></div><div class="description" ng-click="open_dropdown($event, new_exhibit)"><h4>{{new_exhibit.number || '' }} {{new_exhibit.stories[current_museum.language].name || '' }}</h4></div></div></li></ul><div class="groups" ng-show="grouped_exhibits"><h2 ng-click="grouped_positions.published = !grouped_positions.published"><i ng-class="{&#39;icon-chevron-down&#39;: grouped_positions.published == false, &#39;icon-chevron-right&#39;: grouped_positions.published == true}"></i>{{ 'Published items' | i18next }} ({{ (grouped_exhibits.published | filter:criteriaMatch(exhibit_search)).length }})</h2><ul class="exhibits published {{grouped_positions.published}}" collection="published" exhibits-sortable=""><li class="exhibit" data-exhibit-id="{{exhibit._id}}" ng-class="{active: exhibit.active, &#39;reopen&#39;: exhibit.reopen_dropdown}" ng-hide="ajax_progress" ng-repeat="exhibit in grouped_exhibits.published | filter:criteriaMatch(exhibit_search)"><div class="opener {{exhibit.stories[current_museum.language].status}} museum_{{current_museum.stories[current_museum.language].status}}" ng-class="{&#39;border&#39;: exhibit.selected, &#39;draft&#39;:exhibit.stories[current_museum.language].name.length == 0}"><div class="checkbox"><input ng-change="check_selected()" ng-model="exhibit.selected" type="checkbox" /></div><div class="image"><img ng-click="open_dropdown($event, exhibit)" src="{{exhibit.cover.thumbnailUrl || &#39;/img/img-bg.png&#39;}}" /></div><div class="description" ng-click="open_dropdown($event, exhibit)"><h4 ng-class="{&#39;dummy_header&#39;:exhibit.stories[current_museum.language].name.length == 0}">{{exhibit.number}} {{exhibit.stories[current_museum.language].name || exhibit.stories[current_museum.def_lang].name}}</h4><div class="media_types" ng-class="{&#39;invalid&#39;: exhibit.invalid}"><i class="icon-picture empty" ng-show="exhibit.images.length == 0"></i><i class="icon-list-ol empty" ng-show="exhibit.number.length == 0"></i><i class="icon-music" ng-show="exhibit.stories[current_museum.language].audio"></i><i class="icon-music empty" ng-hide="exhibit.stories[current_museum.language].audio"></i><i class="icon-align-left" ng-show="exhibit.stories[current_museum.language].long_description"></i><i class="icon-align-left empty" ng-hide="exhibit.stories[current_museum.language].long_description"></i><i class="icon-youtube-play" ng-show="exhibit.stories[current_museum.language].video"></i><i class="icon-puzzle-piece" ng-show="exhibit.stories[current_museum.language].quiz.status == &#39;published&#39;"></i></div></div><div class="visibility" ng-class="{&#39;invalid&#39;: exhibit.invalid}" ng-switch="" on="exhibit.stories[current_museum.language].status"><i class="icon-globe placeholder" ng-switch-when="published"></i><i class="icon-lock placeholder" ng-switch-when="passcode"></i><i class="icon-eye-close placeholder" ng-switch-when="opas_invisible"></i><div class="on_hover"><switchpub field="status" ng-item="exhibit.stories[current_museum.language]" ng-provider="provider" root="exhibit" type="story"></switchpub></div></div></div></li></ul><h2 ng-click="grouped_positions.passcode = !grouped_positions.passcode"><i ng-class="{&#39;icon-chevron-down&#39;: grouped_positions.passcode == false, &#39;icon-chevron-right&#39;: grouped_positions.passcode == true}"></i>{{ 'Private items' | i18next }} ({{ (grouped_exhibits.private | filter:criteriaMatch(exhibit_search)).length }})</h2><ul class="exhibits passcode {{grouped_positions.passcode}}" collection="private"><li class="exhibit" ng-class="{active: exhibit.active, &#39;reopen&#39;: exhibit.reopen_dropdown}" ng-hide="ajax_progress" ng-repeat="exhibit in grouped_exhibits.private | filter:criteriaMatch(exhibit_search) | filter:statusMatch(&#39;passcode&#39;)"><div class="opener {{exhibit.stories[current_museum.language].status}} museum_{{current_museum.stories[current_museum.language].status}}" ng-class="{&#39;border&#39;: exhibit.selected, &#39;draft&#39;:exhibit.stories[current_museum.language].name.length == 0}"><div class="checkbox"><input ng-change="check_selected()" ng-model="exhibit.selected" type="checkbox" /></div><div class="image"><img ng-click="open_dropdown($event, exhibit)" src="{{exhibit.cover.thumbnailUrl || &#39;/img/img-bg.png&#39;}}" /></div><div class="description" ng-click="open_dropdown($event, exhibit)"><h4 ng-class="{&#39;dummy_header&#39;:exhibit.stories[current_museum.language].name.length == 0}">{{exhibit.number}} {{exhibit.stories[current_museum.language].name || exhibit.stories[current_museum.def_lang].name}}</h4><div class="media_types" ng-class="{&#39;invalid&#39;: exhibit.invalid}"><i class="icon-picture empty" ng-show="exhibit.images.length == 0"></i><i class="icon-list-ol empty" ng-show="exhibit.number.length == 0"></i><i class="icon-music" ng-show="exhibit.stories[current_museum.language].audio"></i><i class="icon-music empty" ng-hide="exhibit.stories[current_museum.language].audio"></i><i class="icon-align-left" ng-show="exhibit.stories[current_museum.language].long_description"></i><i class="icon-align-left empty" ng-hide="exhibit.stories[current_museum.language].long_description"></i><i class="icon-youtube-play" ng-show="exhibit.stories[current_museum.language].video"></i><i class="icon-puzzle-piece" ng-show="exhibit.stories[current_museum.language].quiz.status == &#39;published&#39;"></i></div></div><div class="visibility" ng-class="{&#39;invalid&#39;: exhibit.invalid}" ng-switch="" on="exhibit.stories[current_museum.language].status"><i class="icon-globe placeholder" ng-switch-when="published"></i><i class="icon-lock placeholder" ng-switch-when="passcode"></i><i class="icon-eye-close placeholder" ng-switch-when="opas_invisible"></i><div class="on_hover"><switchpub field="status" ng-item="exhibit.stories[current_museum.language]" ng-provider="provider" root="exhibit" type="story"></switchpub></div></div></div></li></ul><h2 ng-click="grouped_positions.invisible = !grouped_positions.invisible"><i ng-class="{&#39;icon-chevron-down&#39;: grouped_positions.invisible == false, &#39;icon-chevron-right&#39;: grouped_positions.invisible == true}"></i>{{ 'Invisible items' | i18next }} ({{ (grouped_exhibits.invisible | filter:criteriaMatch(exhibit_search)).length }})</h2><ul class="exhibits opas_invisible {{grouped_positions.invisible}}" collection="invisible"><li class="exhibit" ng-class="{active: exhibit.active, &#39;reopen&#39;: exhibit.reopen_dropdown}" ng-hide="ajax_progress" ng-repeat="exhibit in grouped_exhibits.invisible | filter:criteriaMatch(exhibit_search)"><div class="opener {{exhibit.stories[current_museum.language].status}} museum_{{current_museum.stories[current_museum.language].status}}" ng-class="{&#39;border&#39;: exhibit.selected, &#39;draft&#39;:exhibit.stories[current_museum.language].name.length == 0}"><div class="checkbox"><input ng-change="check_selected()" ng-model="exhibit.selected" type="checkbox" /></div><div class="image"><img ng-click="open_dropdown($event, exhibit)" src="{{exhibit.cover.thumbnailUrl || &#39;/img/img-bg.png&#39;}}" /></div><div class="description" ng-click="open_dropdown($event, exhibit)"><h4 ng-class="{&#39;dummy_header&#39;:exhibit.stories[current_museum.language].name.length == 0}">{{exhibit.number}} {{exhibit.stories[current_museum.language].name || exhibit.stories[current_museum.def_lang].name}}</h4><div class="media_types" ng-class="{&#39;invalid&#39;: exhibit.invalid}"><i class="icon-picture empty" ng-show="exhibit.images.length == 0"></i><i class="icon-list-ol empty" ng-show="exhibit.number.length == 0"></i><i class="icon-music" ng-show="exhibit.stories[current_museum.language].audio"></i><i class="icon-music empty" ng-hide="exhibit.stories[current_museum.language].audio"></i><i class="icon-align-left" ng-show="exhibit.stories[current_museum.language].long_description"></i><i class="icon-align-left empty" ng-hide="exhibit.stories[current_museum.language].long_description"></i><i class="icon-youtube-play" ng-show="exhibit.stories[current_museum.language].video"></i><i class="icon-puzzle-piece" ng-show="exhibit.stories[current_museum.language].quiz.status == &#39;published&#39;"></i></div></div><div class="visibility" ng-class="{&#39;invalid&#39;: exhibit.invalid}" ng-switch="" on="exhibit.stories[current_museum.language].status"><i class="icon-globe placeholder" ng-switch-when="published"></i><i class="icon-lock placeholder" ng-switch-when="passcode"></i><i class="icon-eye-close placeholder" ng-switch-when="opas_invisible"></i><div class="on_hover"><switchpub field="status" ng-item="exhibit.stories[current_museum.language]" ng-provider="provider" root="exhibit" type="story"></switchpub></div></div></div></li></ul><h2 ng-click="grouped_positions.draft = !grouped_positions.draft"><i ng-class="{&#39;icon-chevron-down&#39;: grouped_positions.draft == false, &#39;icon-chevron-right&#39;: grouped_positions.draft == true }"></i>{{ 'Draft items' | i18next }} ({{ (grouped_exhibits.draft | filter:criteriaMatch(exhibit_search)).length }})</h2><ul class="exhibits draft {{grouped_positions.draft}}" collection="draft"><li class="exhibit" ng-class="{active: exhibit.active, &#39;reopen&#39;: exhibit.reopen_dropdown}" ng-hide="ajax_progress" ng-repeat="exhibit in grouped_exhibits.draft | filter:criteriaMatch(exhibit_search)"><div class="opener {{exhibit.stories[current_museum.language].status}} museum_{{current_museum.stories[current_museum.language].status}}" ng-class="{&#39;border&#39;: exhibit.selected, &#39;draft&#39;:exhibit.stories[current_museum.language].name.length == 0}"><div class="checkbox"><input ng-change="check_selected()" ng-model="exhibit.selected" type="checkbox" /></div><div class="image"><img ng-click="open_dropdown($event, exhibit)" src="{{exhibit.cover.thumbnailUrl || &#39;/img/img-bg.png&#39;}}" /></div><div class="description" ng-click="open_dropdown($event, exhibit)"><h4 ng-class="{&#39;dummy_header&#39;:exhibit.stories[current_museum.language].name.length == 0}">{{exhibit.number}} {{exhibit.stories[current_museum.language].name || exhibit.stories[current_museum.def_lang].name}}</h4><div class="media_types" ng-class="{&#39;invalid&#39;: exhibit.invalid}"><i class="icon-picture empty" ng-show="exhibit.images.length == 0"></i><i class="icon-list-ol empty" ng-show="exhibit.number.length == 0"></i><i class="icon-music" ng-show="exhibit.stories[current_museum.language].audio"></i><i class="icon-music empty" ng-hide="exhibit.stories[current_museum.language].audio"></i><i class="icon-align-left" ng-show="exhibit.stories[current_museum.language].long_description"></i><i class="icon-align-left empty" ng-hide="exhibit.stories[current_museum.language].long_description"></i><i class="icon-youtube-play" ng-show="exhibit.stories[current_museum.language].video"></i><i class="icon-puzzle-piece" ng-show="exhibit.stories[current_museum.language].quiz.status == &#39;published&#39;"></i></div></div><div class="visibility" ng-class="{&#39;invalid&#39;: exhibit.invalid}" ng-switch="" on="exhibit.stories[current_museum.language].status"><i class="icon-globe placeholder" ng-switch-when="published"></i><i class="icon-lock placeholder" ng-switch-when="passcode"></i><i class="icon-eye-close placeholder" ng-switch-when="opas_invisible"></i><div class="on_hover"><switchpub field="status" ng-item="exhibit.stories[current_museum.language]" ng-provider="provider" root="exhibit" type="story"></switchpub></div></div></div></li><li class="exhibit" ng-class="{active: exhibit.active}" ng-hide="ajax_progress" ng-repeat="exhibit in exhibits | filter:criteriaMatch(exhibit_search) | filter:statusMatch(&#39;dummy&#39;)"><div class="opener {{exhibit.stories[current_museum.language].status}} museum_{{current_museum.stories[current_museum.language].status}}" ng-class="{&#39;border&#39;: exhibit.selected, &#39;draft&#39;:exhibit.stories[current_museum.language].name.length == 0}"><div class="checkbox"><input ng-change="check_selected()" ng-model="exhibit.selected" type="checkbox" /></div><div class="image"><img ng-click="open_dropdown($event, exhibit)" src="{{exhibit.cover.thumbnailUrl || &#39;/img/img-bg.png&#39;}}" /></div><div class="description" ng-click="open_dropdown($event, exhibit)"><h4 ng-class="{&#39;dummy_header&#39;:exhibit.stories[current_museum.language].name.length == 0}">{{exhibit.number}} {{exhibit.stories[current_museum.language].name || exhibit.stories[current_museum.def_lang].name}}</h4><div class="media_types" ng-class="{&#39;invalid&#39;: exhibit.invalid}"><i class="icon-picture empty" ng-show="exhibit.images.length == 0"></i><i class="icon-list-ol empty" ng-show="exhibit.number.length == 0"></i><i class="icon-music" ng-show="exhibit.stories[current_museum.language].audio"></i><i class="icon-music empty" ng-hide="exhibit.stories[current_museum.language].audio"></i><i class="icon-align-left" ng-show="exhibit.stories[current_museum.language].long_description"></i><i class="icon-align-left empty" ng-hide="exhibit.stories[current_museum.language].long_description"></i><i class="icon-youtube-play" ng-show="exhibit.stories[current_museum.language].video"></i><i class="icon-puzzle-piece" ng-show="exhibit.stories[current_museum.language].quiz.status == &#39;published&#39;"></i></div></div><div class="visibility" ng-class="{&#39;invalid&#39;: exhibit.invalid}" ng-switch="" on="exhibit.stories[current_museum.language].status"><i class="icon-globe placeholder" ng-switch-when="published"></i><i class="icon-lock placeholder" ng-switch-when="passcode"></i><i class="icon-eye-close placeholder" ng-switch-when="opas_invisible"></i><div class="on_hover"><switchpub field="status" ng-item="exhibit.stories[current_museum.language]" ng-provider="provider" root="exhibit" type="story"></switchpub></div></div></div></li><li class="exhibit dummy" data-big-image="/img/img-bg.png" ng-show="new_item_creation"><div class="opener draft"><div class="overlay" ng-click="open_dropdown($event, new_exhibit)"></div><div class="image"><img src="/img/img-bg.png" /></div><div class="description" ng-click="open_dropdown($event, new_exhibit)"><h4>{{new_exhibit.number || '' }} {{new_exhibit.stories[current_museum.language].name || '' }}</h4></div></div></li></ul></div><div><a href="#" ng-click="changeLng(&#39;en&#39;)">English</a><a href="#" ng-click="changeLng(&#39;ru&#39;)">Russian</a></div></div></div><to-top></to-top>
